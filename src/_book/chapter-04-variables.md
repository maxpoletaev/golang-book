---
title:  "Переменные"
layout: "chapter"

---

Ранее в этой книге мы имели дело с литеральными значениями (числами, строками, и
т.д.) но программы с одними только литералами фактически бесполезны. Для того
чтобы сделать по-настоящему полезные программы нам нужно узнать о двух важных
вещах: переменных и инструкциях, управляющих ходом исполнения. В этой главе
будут рассмотрены переменные.

Переменная это именованное место хранения какого-то типа данных. Давайте изменим
программу которую мы написали в главе 2 так, чтобы там использовались
переменные.

    package main

    import "fmt"

    func main() {
        var x string = "Hello World"
        fmt.Println(x)
    }

Обратите внимание, что мы по-прежнему используем строковый литерал из
оригинальной программы, но вместо того чтобы напрямую передать его напрямую в
функцию `Println` мы присваиваем его переменной. Переменные в Go создаются с
помощью ключевого слова `var`, за которым следует имя переменной (`x`), тип
(`string`) и присваиваемое значение (`Hello World`). Последний шаг не
обязателен, поэтому программа может быть переписана так:

    package main

    import "fmt"

    func main() {
        var x string
        x = "Hello World"
        fmt.Println(x)
    }

Переменные в Go похожи на переменные в алгебре, но есть несколько различий:

Во первых, когда мы видим символ `=`, мы по привычки читаем его как «х равен
строке Hello World». Нет ничего неверного в том чтобы читать программу таким
образом, но лучше читать это так: «х принимает значение строки Hello World» или
«x присваивается строка Hello World». Это различие важно, потому что (как
понятно по их названию) переменные могут менять свои значения во время
выполнения программы. Попробуйте выполнить следующие:

    package main

    import "fmt"

    func main() {
        var x string
        x = "first"
        fmt.Println(x)
        x = "second"
        fmt.Println(x)
    }

На самом деле, вы можете сделать даже это:

    var x string
    x = "first "
    fmt.Println(x)
    x = x + "second"
    fmt.Println(x)

Эта программа будет бессмысленной, если вы будете читать её как теорему из
алгебры. Но она обретет смысл если вы будете внимательно читать программу как
список команд. Когда вы видим `x = x + "second"`, то должны читать это так:
«присвоить конкатенацию значения переменной x и литерала строки переменной x».
Операции справа от `=` выполняются первыми и результат присваивается левой
части.

Запись `x = x + y` настолько часто встречается в программировании, что в Go есть
специальный оператор присваивания `+=`.  Мы можем записать `x = x + "second"`
как `x += "second"` и результат будет тем же. (Прочие операторы могут быть
использованы подобным образом)

Другое отличие между Go и алгеброй в том, что используется другой символ для
равенства: `==`. (Два знака равно, один за другим) `==` это оператор, как и `+`
и он возвращает логический тип. Например:

    var x string = "hello"
    var y string = "world"
    fmt.Println(x == y)

Напечатает `true`, потому что обе строки одинаковы.

Если мы хотим присвоить значение переменной при её создании, то можем
использовать сокращенную запись:

    x := "Hello World"

Обратите внимание на то что `:` стоит перед `=` и на отсутствие типа. Тип в
данном случае указывать необязательно, так как компилятор Go способен определить
тип по литералу, которым мы инициализируем переменную. (Тут мы присваиваем
строку, поэтому x будет иметь тип `string`) Компилятор может определить тип и
при использовании `var`:

    var x = "Hello World"

И так со всеми типами:

    x := 5
    fmt.Println(x)

В общем, желательно всегда использовать краткий вариант написания.

## Как назвать переменную

Правильное именование переменных — важная часть разработки ПО. Имена должны
начинаться с буквы и могут содержать буквы, цифры и знак _ (знак подчеркивания).
Компилятору Go, в принципе, всё равно, как вы назовете переменную, но не
забудьте, что вам (и может быть кому-то еще) потом это придется читать.
Предположим, у нас есть:

    x := "Max"
    fmt.Println("My dog's name is", x)

В этом случае x это не самое лучшее имя переменной. Лучше было бы так:

    name := "Max"
    fmt.Println("My dog's name is", name)

или даже так:

    dogsName := "Max"
    fmt.Println("My dog's name is", dogsName)

В последнем случае мы использовали специальный способ написания имени
переменной, состоящей из нескольких слов, известный как lower CamelCase (или
camelBack). Первая буква первого слова записывается в нижнем регистре, первая
буква последующих слов записывается в верхнем регистре, всё остальное в нижнем.

## Область видимости

Вернемся к программе, которую мы рассматривали в начале главы:

    package main

    import "fmt"

    func main() {
        var x string = "Hello World"
        fmt.Println(x)
    }

Эту программу можно записать следующим образом:

    package main

    import "fmt"

    var x string = "Hello World"

    func main() {
        fmt.Println(x)
    }

Мы вынесли переменные за пределы функции main. Это означает, что теперь другие
функции имеют доступ к этой переменной:

    var x string = "Hello World"

    func main() {
        fmt.Println(x)
    }

    func f() {
        fmt.Println(x)
    }

Функция `f` имеет доступ к переменной `x`. Теперь предположим, что вместо этого
мы написали:

    func main() {
        var x string = "Hello World"
        fmt.Println(x)
    }

    func f() {
        fmt.Println(x)
    }

Если вы попробуете выполнить эту программу, то получите ошибку:

    .\main.go:11: undefined: x

Компилятор говорит вам, что переменная `x` внутри функции `f` не существует. Она
существует только внутри функции `main`. Места, где может использоваться
переменная `x` называется областью видимости переменной. Согласно спецификации,
«В Go область видимости ограничена блоками». В основном, это значит, что
переменные существуют в только внутри текущих фигурных скобок `{` `}` (в блоке),
включая все вложенные скобки (блоки). Область видимости поначалу может запутать
вас, но когда вы увидите больше примеров всё, станет ясно.

## Константы

Go также поддерживает константы. Константы — это переменные, чьи значения не
могут быть изменены после инициализации. Они создаются таки же образом, как и
переменные, только вместо `var` используется ключевое слово `const`:

    package main

    import "fmt"

    func main() {
        const x string = "Hello World"
        fmt.Println(x)
    }

А вот этот код:

    const x string = "Hello World"
    x = "Some other string"

Вызовет ошибку компиляции:

    .\main.go:7: cannot assign to x

Константы — хороший способ использовать определенные значения в программе, без
необходимости писать их каждый раз. Например: константа `Pi` из пакета `math`.

## Определение нескольких переменных

В Go существует еще одно сокращение, на случай, если необходимо определить несколько переменных:

    var (
        a = 5
        b = 10
        c = 15
    )

Используя ключевые слово `var` (или `const`), за которым идут круглые скобки с
одной переменной в каждой строке.

## Пример программы

    package main

    import "fmt"

    func main() {
        fmt.Print("Enter a number: ")
        var input float64
        fmt.Scanf("%f", &input)
    
        output := input * 2
    
        fmt.Println(output)    
    }
    

Тут мы используем другую функцию из пакета `fmt`, чтобы считать пользовательский
ввод (`Scanf`). `&input` будет объяснен в следующий главах, и все что нам нужно
знать сейчас — что `Scanf` заполняет переменную `input` введенным нами числом.

## Задачи

*   Существуют два способа для создания новой переменной. Какие?

*   Какое будет значение у `x` после выполнения `x := 5; x += 1`?

*   Что такое область видимости и как определяется область видимости переменной в Go?

*   В чем отличие `var` от `const`?

*   Используя пример программы выше, напишите программа переводящей температуру из
    градусов Фаренгейта в градусы Цельсия. (`C = (F - 32) * 5/9`)

*   Напишите другую программу, для перевода футов в метры. (1 фут = 0.3048 метр)
